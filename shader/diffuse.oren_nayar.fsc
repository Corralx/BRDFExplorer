
vec3 diffuse(vec3 albedo, float NdL, float NdV, float VdH, float roughness)
{
	float sigma = max(0.001, roughness * roughness);
	float A = 1.0 - (0.5 * sigma / (sigma + 0.57));
	float B = 0.45 * sigma / (sigma + 0.09);
	float alpha = max(NdL, NdV);
	float beta = min(NdL, NdV);
	return albedo / PI * (A + B * sin(alpha) * tan(beta) * max(0.0, NdL - NdV));
}
